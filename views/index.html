<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title><%= title %></title>
    <link href="/stylesheets/fileinput.css" media="all" rel="stylesheet" type="text/css"/>
    <link href="/stylesheets/bootstrap.min.css" media="all" rel="stylesheet" type="text/css"/>
    <link href='/stylesheets/style.css' rel='stylesheet'/>
    <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>-->
    <script src="/javascripts/jquery.min.js" type="text/javascript"></script>
    <script src="/javascripts/fileinput.js" type="text/javascript"></script>
    <!--<script src="/javascripts/fileinput_locale_fr.js" type="text/javascript"></script>-->
    <!--<script src="/javascripts/fileinput_locale_es.js" type="text/javascript"></script>-->
    <script src="/javascripts/bootstrap.min.js" type="text/javascript"></script>
    <!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js" type="text/javascript"></script>-->
</head>
<body>
<div class="container kv-main">
    <div class="page-header">
        <a href="/logout" class="btn btn-info" style="float: right;">Logout</a>
        <h1><%= title %></h1>
    </div>
    <form enctype="multipart/form-data" id="uploadForm">
        <div>
            <h4>Data information from jiangsu-zhejiang-shanghai Area and other Areas.</h4>
        </div>
        <br>
        <input id="file-0a" class="file" type="file" multiple data-min-file-count="1">
        <br>
        <div><h4>Data infomation from SD card.</h4></div>
        <br>
        <input id="file-0b" class="file" type="file" multiple data-min-file-count="1">
    </form>
    <br>
    <a href="/download/output.xlsx" class="btn btn-primary">Download</a>
    <div id="kv-error-1" style="margin-top:10px;display:none"></div>
    <div id="kv-success-1" class="alert alert-success fade in" style="margin-top:10px;display:none"></div>
</div>
</body>
<script>
    $("#file-0a").fileinput({
        uploadUrl: "/upload", // server upload action
        uploadAsync: true,
//        showPreview: false,
        allowedFileExtensions: ["xls", "xlsx"], //限制文件类型
        elErrorContainer: '#kv-error-1',
        browseClass: "btn btn-success",
//        browseLabel: "浏览",
        browseIcon: '<i ></i>',
        removeClass: "btn btn-danger",
//        removeLabel: "删除",
        removeIcon: '<i ></i>',
        uploadClass: "btn btn-info",
//        uploadLabel: "上传",
        uploadIcon: '<i ></i>',
//    }).on('filepreupload', function (event, data, previewId, index) {
//        console.log(event, data, previewId, index);
//        console.log('File pre upload triggered');
//    }).on('filebatchpreupload', function (event, data, id, index) {
//        console.log(event, data, id, index);
//        $('#kv-success-1').html('<h4>Upload Status</h4><ul></ul>').hide();
//    }).on('fileuploaded', function (event, data, id, index) {
//        var fname = data.files[index].name,
//                out = '<li>' + 'Uploaded file # ' + (index + 1) + ' - ' +
//                        fname + ' successfully.' + '</li>';
//        $('#kv-success-1 ul').append(out);
//        $('#kv-success-1').fadeIn('slow');
    });
    $("#file-0b").fileinput({
        uploadUrl: "/upload", // server upload action
        uploadAsync: true,
//        showPreview: false,
        allowedFileExtensions: ["xls", "xlsx"], //限制文件类型
        elErrorContainer: '#kv-error-1',
        browseClass: "btn btn-success",
//        browseLabel: "浏览",
        browseIcon: '<i ></i>',
        removeClass: "btn btn-danger",
//        removeLabel: "删除",
        removeIcon: '<i ></i>',
        uploadClass: "btn btn-info",
//        uploadLabel: "上传",
        uploadIcon: '<i ></i>',
//    }).on('filepreupload', function (event, data, previewId, index) {
//        console.log(event, data, previewId, index);
//        console.log('File pre upload triggered');
//    }).on('filebatchpreupload', function (event, data, id, index) {
//        console.log(event, data, id, index);
//        $('#kv-success-1').html('<h4>Upload Status</h4><ul></ul>').hide();
//    }).on('fileuploaded', function (event, data, id, index) {
//        var fname = data.files[index].name,
//                out = '<li>' + 'Uploaded file # ' + (index + 1) + ' - ' +
//                        fname + ' successfully.' + '</li>';
//        $('#kv-success-1 ul').append(out);
//        $('#kv-success-1').fadeIn('slow');
    });
</script>
</html>